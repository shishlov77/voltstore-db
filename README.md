# –ë–∞–∑–∞ –¥–∞–Ω–Ω—ã—Ö –∏–Ω—Ç–µ—Ä–Ω–µ—Ç-–º–∞–≥–∞–∑–∏–Ω–∞

–£—á–µ–±–Ω—ã–π –ø–µ—Ç-–ø—Ä–æ–µ–∫—Ç: –ø—Ä–æ–µ–∫—Ç–∏—Ä–æ–≤–∞–Ω–∏–µ –∏ —Ä–µ–∞–ª–∏–∑–∞—Ü–∏—è —Ä–µ–ª—è—Ü–∏–æ–Ω–Ω–æ–π –ë–î
–¥–ª—è –∏–Ω—Ç–µ—Ä–Ω–µ—Ç-–º–∞–≥–∞–∑–∏–Ω–∞ —ç–ª–µ–∫—Ç—Ä–æ–Ω–∏–∫–∏ –∏ –±—ã—Ç–æ–≤–æ–π —Ç–µ—Ö–Ω–∏–∫–∏.

## üìã –û –ø—Ä–æ–µ–∫—Ç–µ

–¶–µ–ª—å ‚Äî –ø—Ä–æ–π—Ç–∏ –ø–æ–ª–Ω—ã–π —Ü–∏–∫–ª —Ä–∞–±–æ—Ç—ã —Å –ë–î –æ—Ç –∫–æ–Ω—Ü–µ–ø—Ç—É–∞–ª—å–Ω–æ–π –º–æ–¥–µ–ª–∏ –¥–æ —Å–ª–æ–∂–Ω—ã—Ö –∞–Ω–∞–ª–∏—Ç–∏—á–µ—Å–∫–∏—Ö –∑–∞–ø—Ä–æ—Å–æ–≤.

**–ß—Ç–æ —Å–¥–µ–ª–∞–Ω–æ:**
-  –°–ø—Ä–æ–µ–∫—Ç–∏—Ä–æ–≤–∞–Ω–∞ —Å—Ö–µ–º–∞ –∏–∑ **13 —Ç–∞–±–ª–∏—Ü** —Å –∏–µ—Ä–∞—Ä—Ö–∏—á–µ—Å–∫–∏–º–∏ –∫–∞—Ç–µ–≥–æ—Ä–∏—è–º–∏
-  –ù–∞—Å—Ç—Ä–æ–µ–Ω—ã –ø–µ—Ä–≤–∏—á–Ω—ã–µ/–≤–Ω–µ—à–Ω–∏–µ –∫–ª—é—á–∏, CHECK-–æ–≥—Ä–∞–Ω–∏—á–µ–Ω–∏—è, UNIQUE
-  –†–∞—Å—Å—Ç–∞–≤–ª–µ–Ω—ã –∏–Ω–¥–µ–∫—Å—ã (–æ–±—ã—á–Ω—ã–µ, —á–∞—Å—Ç–∏—á–Ω—ã–µ, pattern-matching)
-  –ù–∞–ø–∏—Å–∞–Ω —Ç—Ä–∏–≥–≥–µ—Ä –¥–ª—è –∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–æ–≥–æ –≤–µ–¥–µ–Ω–∏—è –∏—Å—Ç–æ—Ä–∏–∏ —Ü–µ–Ω
-  –ì–µ–Ω–µ—Ä–∞—Ü–∏—è —Ç–µ—Å—Ç–æ–≤—ã—Ö –¥–∞–Ω–Ω—ã—Ö: 50 –∫–ª–∏–µ–Ω—Ç–æ–≤, 80 —Ç–æ–≤–∞—Ä–æ–≤, 200+ –∑–∞–∫–∞–∑–æ–≤
-  3 –ø—Ä–µ–¥—Å—Ç–∞–≤–ª–µ–Ω–∏—è (–∫–∞—Ç–∞–ª–æ–≥, —Å—Ç–∞—Ç–∏—Å—Ç–∏–∫–∞ –∫–ª–∏–µ–Ω—Ç–æ–≤, –¥–µ—Ä–µ–≤–æ –∫–∞—Ç–µ–≥–æ—Ä–∏–π)
-  –•—Ä–∞–Ω–∏–º–∞—è –ø—Ä–æ—Ü–µ–¥—É—Ä–∞ –æ—Ñ–æ—Ä–º–ª–µ–Ω–∏—è –∑–∞–∫–∞–∑–∞ —Å –ø—Ä–æ–≤–µ—Ä–∫–∞–º–∏ –∏ —Å–ø–∏—Å–∞–Ω–∏–µ–º –æ—Å—Ç–∞—Ç–∫–æ–≤
-  10 –∞–Ω–∞–ª–∏—Ç–∏—á–µ—Å–∫–∏—Ö –∑–∞–ø—Ä–æ—Å–æ–≤ —Å –æ–∫–æ–Ω–Ω—ã–º–∏ —Ñ—É–Ω–∫—Ü–∏—è–º–∏, CTE –∏ —Ä–µ–∫—É—Ä—Å–∏–µ–π
-  RFM-—Å–µ–≥–º–µ–Ω—Ç–∞—Ü–∏—è, –∫–æ–≥–æ—Ä—Ç–Ω—ã–π –∞–Ω–∞–ª–∏–∑, —Å–∫–æ–ª—å–∑—è—â–µ–µ —Å—Ä–µ–¥–Ω–µ–µ


## üõ† –°—Ç–µ–∫

| –¢–µ—Ö–Ω–æ–ª–æ–≥–∏—è | –ù–∞–∑–Ω–∞—á–µ–Ω–∏–µ |
| --- | --- |
| PostgreSQL 16 | –°–£–ë–î |
| DBeaver | SQL-–∫–ª–∏–µ–Ω—Ç, ER-–¥–∏–∞–≥—Ä–∞–º–º–∞ |

## üöÄ –ö–∞–∫ –∑–∞–ø—É—Å—Ç–∏—Ç—å

### 1. –ö–ª–æ–Ω–∏—Ä—É–π —Ä–µ–ø–æ–∑–∏—Ç–æ—Ä–∏–π

```bash
git clone https://github.com/shishlov77/voltstore-db.git
cd voltstore-db
```
### 2. –°–æ–∑–¥–∞–π –±–∞–∑—É –¥–∞–Ω–Ω—ã—Ö

```
CREATE USER voltstore WITH PASSWORD 'secret123';
CREATE DATABASE voltstore OWNER voltstore;
GRANT ALL PRIVILEGES ON DATABASE voltstore TO voltstore;
```

### 3. –í—ã–ø–æ–ª–Ω–∏ —Å–∫—Ä–∏–ø—Ç—ã –ø–æ –ø–æ—Ä—è–¥–∫—É

```
psql -U voltstore -d voltstore -f sql/01_ddl.sql
psql -U voltstore -d voltstore -f sql/02_seed.sql
psql -U voltstore -d voltstore -f sql/03_views.sql
psql -U voltstore -d voltstore -f sql/04_procedures.sql
```

### 4.–ü–∞—Ä–∞–º–µ—Ç—Ä—ã –ø–æ–¥–∫–ª—é–µ–Ω–∏—è

|–ü–∞—Ä–∞–º–µ—Ç—Ä	| –ó–Ω–∞—á–µ–Ω–∏–µ|
| --- | --- |
|Host	|localhost|
|Port	| 5432|
|Database	| voltstore|
|User	| voltstore|
|Password	| secret123|



### 5.C—Ö–µ–º–∞ –±–∞–∑—ã –¥–∞–Ω–Ω—ã—Ö

| –¢–∞–±–ª–∏—Ü–∞         | –û–ø–∏—Å–∞–Ω–∏–µ               | –ó–∞–ø–∏—Å–µ–π |
|-----------------|------------------------|---------|
| customers       | –ö–ª–∏–µ–Ω—Ç—ã                | 50      |
| addresses       | –ê–¥—Ä–µ—Å–∞ –¥–æ—Å—Ç–∞–≤–∫–∏        | 70      |
| categories      | –ö–∞—Ç–µ–≥–æ—Ä–∏–∏ (–∏–µ—Ä–∞—Ä—Ö–∏—è)   | 13      |
| brands          | –ë—Ä–µ–Ω–¥—ã                 | 10      |
| products        | –¢–æ–≤–∞—Ä—ã                 | 78      |
| product_images  | –§–æ—Ç–æ —Ç–æ–≤–∞—Ä–æ–≤           | 156     |
| price_history   | –ò—Å—Ç–æ—Ä–∏—è —Ü–µ–Ω            | –∞–≤—Ç–æ    |
| orders          | –ó–∞–∫–∞–∑—ã                 | 200     |
| order_items     | –ü–æ–∑–∏—Ü–∏–∏ –∑–∞–∫–∞–∑–æ–≤        | 500     |
| payments        | –û–ø–ª–∞—Ç—ã                 | 200     |
| reviews         | –û—Ç–∑—ã–≤—ã                 | 100     |
| wishlists       | –ò–∑–±—Ä–∞–Ω–Ω–æ–µ              | 100     |
| promo_codes     | –ü—Ä–æ–º–æ–∫–æ–¥—ã              | 4       |

### 6. –°—Ç—Ä—É–∫—Ç—É—Ä–∞ —Ä–µ–ø–æ–∑–∏—Ç–æ—Ä–∏—è

    voltstore-db/
    ‚îú‚îÄ‚îÄ README.md
    ‚îú‚îÄ‚îÄ .gitignore
    ‚îú‚îÄ‚îÄ docs/
    ‚îÇ   ‚îî‚îÄ‚îÄ –î–∏–∞–≥—Ä–∞–º–º–∞.png
    ‚îî‚îÄ‚îÄ sql/
        ‚îú‚îÄ‚îÄ 01_ddl.sql           ‚Äî —Ç–∞–±–ª–∏—Ü—ã, –∏–Ω–¥–µ–∫—Å—ã, —Ç—Ä–∏–≥–≥–µ—Ä
        ‚îú‚îÄ‚îÄ 02_seed.sql          ‚Äî –≥–µ–Ω–µ—Ä–∞—Ü–∏—è —Ç–µ—Å—Ç–æ–≤—ã—Ö –¥–∞–Ω–Ω—ã—Ö
        ‚îú‚îÄ‚îÄ 03_views.sql         ‚Äî –ø—Ä–µ–¥—Å—Ç–∞–≤–ª–µ–Ω–∏—è
        ‚îú‚îÄ‚îÄ 04_procedures.sql    ‚Äî –ø—Ä–æ—Ü–µ–¥—É—Ä—ã –∏ —Ñ—É–Ω–∫—Ü–∏–∏
        ‚îî‚îÄ‚îÄ 05_queries.sql       ‚Äî –∞–Ω–∞–ª–∏—Ç–∏—á–µ—Å–∫–∏–µ –∑–∞–ø—Ä–æ—Å—ã

### 7. –ò—Ç–æ–≥ 

 –ü—Ä–æ–µ–∫—Ç–∏—Ä–æ–≤–∞–Ω–∏–µ –ë–î: –∫–æ–Ω—Ü–µ–ø—Ç—É–∞–ª—å–Ω–∞—è, –ª–æ–≥–∏—á–µ—Å–∫–∞—è –∏ —Ñ–∏–∑–∏—á–µ—Å–∫–∞—è –º–æ–¥–µ–ª—å

DDL: —Ç–∞–±–ª–∏—Ü—ã, –æ–≥—Ä–∞–Ω–∏—á–µ–Ω–∏—è, –∏–Ω–¥–µ–∫—Å—ã (—á–∞—Å—Ç–∏—á–Ω—ã–µ, –ø–æ –ø–∞—Ç—Ç–µ—Ä–Ω—É)

–¢—Ä–∏–≥–≥–µ—Ä—ã –∏ —Ö—Ä–∞–Ω–∏–º—ã–µ –ø—Ä–æ—Ü–µ–¥—É—Ä—ã –Ω–∞ PL/pgSQL

–ì–µ–Ω–µ—Ä–∞—Ü–∏—è —Ç–µ—Å—Ç–æ–≤—ã—Ö –¥–∞–Ω–Ω—ã—Ö —á–µ—Ä–µ–∑ generate_series –∏ –º–∞—Å—Å–∏–≤—ã

–û–∫–æ–Ω–Ω—ã–µ —Ñ—É–Ω–∫—Ü–∏–∏: RANK, LAG, NTILE, SUM OVER

CTE –∏ —Ä–µ–∫—É—Ä—Å–∏–≤–Ω—ã–µ CTE

